{% extends "base.html" %}

{% block extra_links %}
    <a href="/logout">Logout</a> 
{% endblock %}

{% block body %}
    {% if admin %}
    <div class="entry">
        <div class="wrapper left">
            <div class="date tomorrow"></div>
            <div class="content"><a href="/create-post">add post.</a></div>
            <div class="conclusion">enjoyment: </div>
            <div class="icons">
                <svg class="icon" viewBox="0 0 100 100"><path d="M65.14746,74.94336c-22.1416,0-40.09082-17.94922-40.09082-40.09082c0-14.93555,8.17285-27.9541,20.28516-34.85254 C19.90332,2.40332,0,23.81934,0,49.88672C0,77.56348,22.43652,100,50.11328,100C76.18066,100,97.5957,80.09668,100,54.6582 C93.10156,66.77051,80.08301,74.94336,65.14746,74.94336z"/></svg>
                <svg class="icon" viewBox="0 0 100 100"><path d="M65.14746,74.94336c-22.1416,0-40.09082-17.94922-40.09082-40.09082c0-14.93555,8.17285-27.9541,20.28516-34.85254 C19.90332,2.40332,0,23.81934,0,49.88672C0,77.56348,22.43652,100,50.11328,100C76.18066,100,97.5957,80.09668,100,54.6582 C93.10156,66.77051,80.08301,74.94336,65.14746,74.94336z"/></svg>
                <svg class="icon" viewBox="0 0 100 100"><path d="M65.14746,74.94336c-22.1416,0-40.09082-17.94922-40.09082-40.09082c0-14.93555,8.17285-27.9541,20.28516-34.85254 C19.90332,2.40332,0,23.81934,0,49.88672C0,77.56348,22.43652,100,50.11328,100C76.18066,100,97.5957,80.09668,100,54.6582 C93.10156,66.77051,80.08301,74.94336,65.14746,74.94336z"/></svg>
            </div>
            <div class="conclusion">.</div>
        </div>
        <div class="wrapper right">
            <div class="date tomorrow"></div>
            <div class="content"><a href="/manage-access">manage access.</a></div>
            <div class="conclusion">enjoyment: </div>
            <div class="icons">
                <svg class="icon" viewBox="0 0 100 100"><path d="M65.14746,74.94336c-22.1416,0-40.09082-17.94922-40.09082-40.09082c0-14.93555,8.17285-27.9541,20.28516-34.85254 C19.90332,2.40332,0,23.81934,0,49.88672C0,77.56348,22.43652,100,50.11328,100C76.18066,100,97.5957,80.09668,100,54.6582 C93.10156,66.77051,80.08301,74.94336,65.14746,74.94336z"/></svg>
                <svg class="icon" viewBox="0 0 100 100"><path d="M65.14746,74.94336c-22.1416,0-40.09082-17.94922-40.09082-40.09082c0-14.93555,8.17285-27.9541,20.28516-34.85254 C19.90332,2.40332,0,23.81934,0,49.88672C0,77.56348,22.43652,100,50.11328,100C76.18066,100,97.5957,80.09668,100,54.6582 C93.10156,66.77051,80.08301,74.94336,65.14746,74.94336z"/></svg>
            </div>
            <div class="conclusion">.</div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            function formatDate(date) {
                const monthNames = ["jan", "feb", "mar", "apr", "may", "june", "july", "aug", "sept", "oct", "nov", "dec"];
                let day = date.getDate();
                let monthIndex = date.getMonth();
                let year = date.getFullYear();
        
                return `${monthNames[monthIndex]} ${day}, ${year}`;
            }

            let today = new Date();
            today.setDate(today.getDate() + 1)
            let formattedDate = formatDate(today);

            let dateElements = document.querySelectorAll('.tomorrow');
            dateElements.forEach(function(elem) {
                elem.textContent = formattedDate;
            });
        });        
    </script>
    {% endif %}
    {% for date, posts in posts.items() %}
    <div class="entry">
        {% for side in ['left', 'right'] %}
            {% if posts[side] %}
            {% set post = posts[side] %}
            <div class="wrapper {{ side }}">
                <div class="date">
                    {{ date }}
                </div>
                <div class="content">
                    {{ post.content }}
                </div>
                <div class="conclusion">enjoyment: </div>
                <div class="icons">
                    {% for _ in range(post.rating) %}
                    <svg class="icon" viewBox="0 0 100 100"><path d="M65.14746,74.94336c-22.1416,0-40.09082-17.94922-40.09082-40.09082c0-14.93555,8.17285-27.9541,20.28516-34.85254 C19.90332,2.40332,0,23.81934,0,49.88672C0,77.56348,22.43652,100,50.11328,100C76.18066,100,97.5957,80.09668,100,54.6582 C93.10156,66.77051,80.08301,74.94336,65.14746,74.94336z"/></svg>
                    {% endfor %}
                </div>
                <div class="conclusion">.</div>
            </div>
            {% endif %}
        {% endfor %}
    </div>
    {% endfor %}
{% endblock %}
